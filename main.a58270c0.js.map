{"version":3,"sources":["scripts/main.js"],"names":["table","document","querySelector","ascending","dataSort","array","index","direction","sort","a","b","itemA","children","textContent","itemB","startsWith","parseFloat","slice","isNaN","localeCompare","forEach","item","tBodies","appendChild","selectedRowAddClass","e","targetRow","target","closest","contains","onlyOneRowActive","classList","add","rows","activeRow","find","row","remove","addEventListener","matches","cellIndex","form","createElement","labels","className","body","innerHTML","map","label","toLowerCase","join","labelForSelect","options","option","insertBefore","formInputs","querySelectorAll","selectInput","idSelectors","tBody","addData","preventDefault","dataValidation","tableRow","insertRow","id","cell","input","getElementById","selectedIndex","text","value","toLocaleString","submitButton","minNameLength","minAge","maxAge","errorNotificationName","title","description","type","errorNotificationBlankField","errorNotificationAge","successNotification","hasInvalidFields","pushNotification","nameField","ageField","length","initialCellValue","inputToEdit","notification","messageBlock","setAttribute","titleMessage","innerText","messageText","append","lastChild","before","setTimeout","editTableContent","contenteditable","focus","saveEditedInfo","trim","match","key"],"mappings":"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","file":"main.a58270c0.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n/* sorting block start */\n\nconst table = document.querySelector('table');\nlet ascending = true;\n\nfunction dataSort(array, index, direction) {\n  if (direction) {\n    array.sort((a, b) => {\n      const itemA = a.children[index].textContent;\n      const itemB = b.children[index].textContent;\n\n      if (itemA.startsWith('$')) {\n        return parseFloat(itemA.slice(1)) - parseFloat(itemB.slice(1));\n      }\n\n      if (isNaN(itemA)) {\n        return itemA.localeCompare(itemB);\n      }\n\n      return itemA - itemB;\n    }).forEach(item => table.tBodies[0].appendChild(item));\n  } else {\n    array.sort((a, b) => {\n      const itemA = a.children[index].textContent;\n      const itemB = b.children[index].textContent;\n\n      if (itemA.startsWith('$')) {\n        return parseFloat(itemB.slice(1)) - parseFloat(itemA.slice(1));\n      }\n\n      if (isNaN(itemA)) {\n        return itemB.localeCompare(itemA);\n      }\n\n      return itemB - itemA;\n    }).forEach(item => table.tBodies[0].appendChild(item));\n  }\n}\n\ntable.addEventListener('mouseout', e => {\n  if (!e.target.matches('th') || e.target.closest('tfoot')) {\n    return;\n  }\n\n  ascending = true;\n});\n\ntable.addEventListener('click', e => {\n  const index = e.target.cellIndex;\n  const rows = [ ...table.tBodies[0].children ];\n\n  if (!e.target.matches('th') || e.target.closest('tfoot')) {\n    return;\n  }\n\n  dataSort(rows, index, ascending);\n\n  ascending = !ascending;\n});\n\n/* sorting block end */\n\n/* row selected block start */\n\nfunction selectedRowAddClass(e) {\n  const targetRow = e.target.closest('tr');\n\n  if (!targetRow.closest('tbody') || !table.contains(targetRow)) {\n    return;\n  }\n\n  onlyOneRowActive();\n\n  targetRow.classList.add('active');\n}\n\nfunction onlyOneRowActive() {\n  const rows = [ ...table.tBodies[0].children ];\n  const activeRow = rows.find(row => row.classList.contains('active'));\n\n  if (activeRow) {\n    activeRow.classList.remove('active');\n  }\n}\n\ntable.addEventListener('click', selectedRowAddClass);\n\n/* row selected block end */\n\n/* add new employees form block start */\n\nconst form = document.createElement('form');\nconst labels = ['Name', 'Position', 'Age', 'Salary'];\n\nform.className = 'new-employee-form';\ndocument.body.appendChild(form);\n\nform.innerHTML = `\n  ${labels.map(label => `\n    <label>${label}: \n      <input\n        name=\"${label.toLowerCase()}\"\n        id=\"${label.toLowerCase()}\"\n        data-qa=\"${label.toLowerCase()}\"\n        type=\"${\n  label.toLowerCase() === 'age' || label.toLowerCase() === 'salary'\n    ? 'number'\n    : 'text'\n}\"\n        required\n      >\n    </label>\n  `).join('')}\n\n  <button type=\"submit\" value=\"Save to table\">Save to table</button>\n`;\n\nconst labelForSelect = document.createElement('label');\nconst options = [`Tokyo`, `Singapore`, `London`, `New York`,\n  `Edinburgh`, `San Francisco`];\n\nlabelForSelect.innerHTML = `\n  Office:\n  <select\n    name=\"office\"\n    id=\"office\"\n    data-qa=\"office\"\n  >\n    ${options.map(option => `\n      <option value=\"${option.toLowerCase()}\">\n        ${option}\n      </option>\n    `)}\n  </select>\n`;\n\nform.insertBefore(labelForSelect, form.children[2]);\n\nconst formInputs = document.querySelectorAll('input');\nconst selectInput = document.querySelector('select');\n\nconst idSelectors = ['name', 'position', 'office', 'age', 'salary'];\nconst tBody = document.querySelector('tbody');\n\nfunction addData(e) {\n  e.preventDefault();\n\n  if (!dataValidation()) {\n    return;\n  };\n\n  const tableRow = tBody.insertRow();\n\n  idSelectors.forEach(id => {\n    const cell = document.createElement('td');\n    const input = document.getElementById(id);\n\n    switch (id) {\n      case 'office':\n        cell.textContent = input[input.selectedIndex].text;\n        break;\n\n      case 'salary':\n        cell.textContent = `$${parseFloat(input.value).toLocaleString('en')}`;\n        break;\n\n      default:\n        cell.textContent = input.value;\n        break;\n    }\n\n    tableRow.appendChild(cell);\n  });\n\n  [ ...formInputs ].forEach(input => {\n    input.value = '';\n  });\n  selectInput.selectedIndex = 0;\n}\n\nconst submitButton = document.querySelector('button');\n\nsubmitButton.addEventListener('click', addData);\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n});\n\n/* add new employees form block end */\n\n/* data validation block start */\n\nconst minNameLength = 4;\nconst minAge = 18;\nconst maxAge = 90;\nconst errorNotificationName = {\n  title: 'Error has occured',\n  description: 'Name must contain at least 4 characters.',\n  type: 'error',\n};\nconst errorNotificationBlankField = {\n  title: 'Error has occured',\n  description: 'All fields are required.',\n  type: 'error',\n};\nconst errorNotificationAge = {\n  title: 'Error has occured',\n  description: 'Age must be between 18 and 90 inclusive.',\n  type: 'error',\n};\nconst successNotification = {\n  title: 'Success!',\n  description: 'A new employee is successfully added.',\n  type: 'success',\n};\n\nfunction dataValidation() {\n  const hasInvalidFields = !!document.querySelector('form :invalid');\n\n  if (hasInvalidFields) {\n    pushNotification(errorNotificationBlankField);\n\n    return false;\n  }\n\n  const nameField = document.getElementById('name').value;\n  const ageField = document.getElementById('age').value;\n\n  if (nameField.length < minNameLength) {\n    pushNotification(errorNotificationName);\n\n    return false;\n  }\n\n  if (ageField < minAge || ageField > maxAge) {\n    pushNotification(errorNotificationAge);\n\n    return false;\n  }\n\n  pushNotification(successNotification);\n\n  return true;\n}\n\nconst pushNotification = (notification) => {\n  const { title, description, type } = notification;\n  const messageBlock = document.createElement('div');\n\n  messageBlock.classList.add('notification', type);\n  messageBlock.setAttribute('data-qa', 'notification');\n\n  const titleMessage = document.createElement('h2');\n\n  titleMessage.classList.add('title');\n  titleMessage.innerText = title;\n\n  const messageText = document.createElement('p');\n\n  messageText.innerText = description;\n\n  messageBlock.append(titleMessage, messageText);\n  document.body.lastChild.before(messageBlock);\n\n  setTimeout(() => {\n    messageBlock.remove();\n  }, 5000);\n};\n\n/* data validation block end */\n\n/* edit content block start */\n\nlet initialCellValue;\nlet inputToEdit;\n\nfunction editTableContent(e) {\n  const item = e.target.closest('td');\n\n  if (!e.target.matches('td') || !table.contains(item)) {\n    return;\n  }\n\n  item.contenteditable = true;\n\n  initialCellValue = item.textContent;\n\n  item.innerHTML = `\n    <input\n      name=\"editable-cell\"\n      type=\"text\"\n      class=\"cell-input\"\n      value=\"${initialCellValue}\"\n    >`;\n\n  inputToEdit = document.querySelector('.cell-input');\n\n  inputToEdit.focus();\n  item.focus();\n}\n\nfunction saveEditedInfo(e) {\n  const item = e.target.closest('td');\n  const regExAgeField = /^(1[89]|[2-8][0-9]|90)$/;\n  const regExSalaryField = /^([$])(.*[,])(.*\\d)$/gm;\n  const regExNameField = /^(.*[a-z ]{4,})$/gmi;\n\n  inputToEdit = document.querySelector('.cell-input');\n\n  if (!isNaN(initialCellValue)\n  && !inputToEdit.value.trim().match(regExAgeField)) {\n    pushNotification(errorNotificationAge);\n    item.textContent = initialCellValue;\n    inputToEdit.remove();\n\n    return;\n  }\n\n  if (initialCellValue.trim().startsWith('$')\n  && !inputToEdit.value.trim().match(regExSalaryField)) {\n    item.textContent = initialCellValue;\n    inputToEdit.remove();\n\n    return;\n  }\n\n  if (item.cellIndex === 0 && !inputToEdit.value.trim().match(regExNameField)) {\n    pushNotification(errorNotificationName);\n    item.textContent = initialCellValue;\n    inputToEdit.remove();\n\n    return;\n  }\n\n  if (inputToEdit.value.trim().length === 0) {\n    item.textContent = initialCellValue;\n    inputToEdit.remove();\n\n    return;\n  }\n\n  item.textContent = inputToEdit.value.trim();\n  inputToEdit.remove();\n}\n\ntable.addEventListener('dblclick', editTableContent);\ntable.addEventListener('focusout', saveEditedInfo);\ntable.addEventListener('focusout', onlyOneRowActive);\n\ndocument.body.addEventListener('click', e => {\n  if (e.target.matches('body')) {\n    onlyOneRowActive();\n  }\n});\n\ntable.addEventListener('keypress', e => {\n  if (e.key === 'Enter') {\n    saveEditedInfo(e);\n  }\n});\n\n/* edit content block end */\n"]}